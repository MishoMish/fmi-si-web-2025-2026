# Функции и работа с файлове

## Функции

### Деклариране

```php
<?php
function greet($name) {
    return "Здравей, $name!";
}

echo greet("Иван"); // "Здравей, Иван!"
?>
```

### Параметри по подразбиране

```php
<?php
function greet($name = "гост") {
    return "Здравей, $name!";
}

echo greet();        // "Здравей, гост!"
echo greet("Мария"); // "Здравей, Мария!"
?>
```

### Type hints (PHP 7+)

```php
<?php
function sum(int $a, int $b): int {
    return $a + $b;
}

function getUser(string $name): ?array {
    // ?array означава array или null
    return null;
}
?>
```

### Обхват на променливи

```php
<?php
$globalVar = "Глобална";

function test() {
    // $globalVar НЕ е достъпна тук
    echo $globalVar; // Грешка!

    // За достъп до глобална:
    global $globalVar;
    echo $globalVar;  // "Глобална"
}
?>
```

## Включване на файлове

### `require` / `require_once`

Спира изпълнението ако файлът не е намерен:

```php
<?php
require_once 'config.php';
require_once 'functions.php';
?>
```

### `include` / `include_once`

Продължава изпълнението дори файлът да не е намерен (дава warning):

```php
<?php
include 'sidebar.php';
?>
```

> **Правило:** Използвайте `require_once` за критични файлове (конфигурация, класове). Използвайте `include` за шаблони, които може да липсват.

### Пример: PHP шаблони

**head.php:**

```php
<head>
    <?php
        $title = isset($pageTitle) ? $pageTitle : "My Website";
    ?>
    <title><?= $title ?></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>
```

**profile.php:**

```php
<html>
    <?php
        $pageTitle = "User Profile";
        include 'head.php';
    ?>
    <body>
        <h1>Welcome to the User Profile Page</h1>
    </body>
</html>
```

> Това е основен начин за преизползване на HTML компоненти.

## Работа с дати

```php
<?php
echo date("Y-m-d");          // 2025-03-15
echo date("H:i:s");          // 14:30:00
echo date("d.m.Y H:i");      // 15.03.2025 14:30

$timestamp = time();           // текущо Unix време
echo date("Y", $timestamp);   // 2025
?>
```

## Полезни вградени функции

### Стрингове

```php
<?php
strlen("Hello");              // 5
strtolower("HELLO");          // "hello"
strtoupper("hello");          // "HELLO"
trim("  hello  ");            // "hello"
str_replace("world", "PHP", "Hello world"); // "Hello PHP"
explode(",", "a,b,c");        // ["a", "b", "c"]
implode("-", ["a", "b", "c"]); // "a-b-c"
substr("Hello World", 0, 5);   // "Hello"
?>
```

### Масиви

```php
<?php
count($arr);                   // брой елементи
array_push($arr, "new");       // добавя в края
array_pop($arr);               // премахва от края
in_array("apple", $fruits);    // true/false
array_key_exists("name", $user); // true/false
sort($arr);                    // сортиране по стойност
array_merge($arr1, $arr2);    // обединяване
?>
```

### Проверка на типове

```php
<?php
isset($var);      // дали е дефинирана и не е null
empty($var);      // дали е празна (null, "", 0, false, [])
is_string($var);  // дали е стринг
is_numeric($var); // дали е число (или числов стринг)
is_array($var);   // дали е масив
?>
```
